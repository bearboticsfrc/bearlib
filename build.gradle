plugins {
    id "java"
    id "maven-publish"
    id "edu.wpi.first.GradleRIO" version "2025.1.1"
}

group = "frc4068.bearlib"
version = "2025.0.2"

repositories {
    mavenCentral()
}


// Defining my dependencies. In this case, WPILib (+ friends), and vendor libraries.
// Also defines JUnit 5.
dependencies {
    implementation wpi.java.deps.wpilib()
    implementation wpi.java.vendor.java()

    testImplementation "org.junit.jupiter:junit-jupiter:5.10.1"
    testRuntimeOnly "org.junit.platform:junit-platform-launcher"

    // https://mvnrepository.com/artifact/gov.nist.math/jama
    implementation group: "gov.nist.math", name: "jama", version: "1.0.3"
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17

    withSourcesJar()
    withJavadocJar()
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
        }
    }

    repositories {
        maven {
            url = "${buildDir}/../" 
        }
    }
}

// Configure string concat to always inline compile
tasks.withType(JavaCompile) {
    options.compilerArgs.add "-XDstringConcat=inline"
}